import{r as l,a as b,j as s}from"./app-Bzd2Cgmj.js";import{C as N}from"./Card-cqcK0fx-.js";import{B as v}from"./Button-CWMM_Qw9.js";/* empty css            */function E(){const[t,d]=l.useState({name:"",email:"",phone:"",address:{line1:"",line2:"",city:"",state:"",postal:"",country:""}}),[o,m]=l.useState(""),[c,p]=l.useState(""),[g,j]=l.useState(!0),[x,h]=l.useState(null),[f,i]=l.useState(null);l.useEffect(()=>{let e=!0;return b("/auth/me").then(a=>{e&&d(a.data)}).catch(()=>i("Unable to load profile.")).finally(()=>j(!1)),()=>{e=!1}},[]);async function y(e){e.preventDefault(),h(null),i(null);try{const a={...t,address:t.address};o&&(a.password=o,a.password_confirmation=c);const n=await b("/auth/me",{method:"PUT",body:JSON.stringify(a)});d(n.data),m(""),p(""),h("Profile updated.")}catch(a){i(a instanceof Error?a.message:"Unable to update profile.")}}function u(e,a){d(n=>({...n,[e]:a}))}function r(e,a){d(n=>({...n,address:{...n.address,[e]:a}}))}return s.jsx("div",{className:"grid gap-6",children:s.jsx(N,{title:"Profile",subtitle:"Update your contact info and login",children:g?s.jsx("p",{className:"text-sm text-slate-500",children:"Loadingâ€¦"}):s.jsxs("form",{className:"grid gap-4 md:grid-cols-2",onSubmit:y,children:[s.jsxs("label",{className:"text-sm",children:["Full name",s.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:t.name,onChange:e=>u("name",e.target.value),required:!0})]}),s.jsxs("label",{className:"text-sm",children:["Email",s.jsx("input",{type:"email",className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:t.email,onChange:e=>u("email",e.target.value),required:!0})]}),s.jsxs("label",{className:"text-sm",children:["Phone",s.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:t.phone,onChange:e=>u("phone",e.target.value)})]}),s.jsxs("label",{className:"text-sm",children:["Address line 1",s.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:t.address.line1,onChange:e=>r("line1",e.target.value)})]}),s.jsxs("label",{className:"text-sm",children:["Address line 2",s.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:t.address.line2,onChange:e=>r("line2",e.target.value)})]}),s.jsxs("label",{className:"text-sm",children:["City",s.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:t.address.city,onChange:e=>r("city",e.target.value)})]}),s.jsxs("label",{className:"text-sm",children:["State",s.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:t.address.state,onChange:e=>r("state",e.target.value)})]}),s.jsxs("label",{className:"text-sm",children:["Postal code",s.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:t.address.postal,onChange:e=>r("postal",e.target.value)})]}),s.jsxs("label",{className:"text-sm",children:["Country",s.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:t.address.country,onChange:e=>r("country",e.target.value)})]}),s.jsxs("label",{className:"text-sm",children:["New password",s.jsx("input",{type:"password",className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:o,onChange:e=>m(e.target.value),placeholder:"Leave blank to keep current",minLength:8})]}),s.jsxs("label",{className:"text-sm",children:["Confirm password",s.jsx("input",{type:"password",className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:c,onChange:e=>p(e.target.value),placeholder:"Repeat new password",minLength:8})]}),s.jsxs("div",{className:"md:col-span-2 flex flex-wrap items-center gap-3",children:[s.jsx(v,{type:"submit",children:"Save profile"}),x&&s.jsx("p",{className:"text-sm text-emerald-600",children:x}),f&&s.jsx("p",{className:"text-sm text-rose-600",children:f})]})]})})})}export{E as default};
