import{u as We,r as n,j as e,T as Ke,a as o,i as Ve}from"./app-Ca5saH2H.js";import{C as c}from"./Card-D83dShKm.js";import{B as m}from"./Button-DTE-fA5O.js";import{T as f}from"./Table-qyxYoc6p.js";import{B as M}from"./Badge-BVvhdtxa.js";/* empty css            */const Ye={locations:[{name:"Downtown Studio",timezone:"America/Los_Angeles",capacity:30}],plans:[{name:"Unlimited",external_id:"UNLIMITED",price_cents:18900,currency:"USD"}],members:[{first_name:"Jordan",last_name:"Lee",email:"jordan@example.com",phone:"+14155550123",status:"active",joined_on:"2024-05-01",plan_external_id:"UNLIMITED",home_location:"Downtown Studio",tags:["streak-break"]}]};function at(){var Ne;const{branding:l,setBranding:Se}=We(),[we,G]=n.useState([]),[X,Z]=n.useState(null),[j,ee]=n.useState(null),[b,te]=n.useState(!0),[se,u]=n.useState(null),[ae,U]=n.useState(!0),[re,O]=n.useState("21:00"),[ne,z]=n.useState("08:00"),[le,I]=n.useState(3),[oe,L]=n.useState(12),[ie,A]=n.useState("member_preference"),[B,C]=n.useState(null),[Ce,k]=n.useState(!1),[ke,T]=n.useState([]),[Te,de]=n.useState([]),[Pe,De]=n.useState([]),[y,P]=n.useState({name:"",description:"",default_capacity:""}),[Ee,Fe]=n.useState([]),[Me,ce]=n.useState([]),[q,J]=n.useState({title:"",body:""}),[D,Ue]=n.useState(null),[Oe,me]=n.useState([]),[v,N]=n.useState({domain:"",spf_record:"",dkim_selector:"",dkim_value:""}),[ze,ue]=n.useState([]),[R,$]=n.useState({brand_name:"",campaign_name:""}),[_,S]=n.useState({name:"",support_email:"",primary_color:"#4b79ff",accent_color:"#2f63ff"}),[H,Q]=n.useState({subdomain:"",custom_domain:""}),[x,p]=n.useState({host:"",port:587,username:"",password:"",encryption:"tls",from_email:"",from_name:""}),[pe,E]=n.useState(null),[xe,he]=n.useState(!1),[ge,W]=n.useState(null),[ye,K]=n.useState(null),[w,Ie]=n.useState(null),[Le,fe]=n.useState(!1),[be,je]=n.useState(null);n.useEffect(()=>{const t=new AbortController;async function s(){try{te(!0),u(null);const r=await o("/settings/overview",{signal:t.signal});if(t.signal.aborted)return;const a=r.data;a.organization_id&&localStorage.setItem("fitflow.orgId",a.organization_id),G(a.integrations??[]),Z(a.policy??null),ee(a.mfa??null),a.policy&&(U(a.policy.enforce_stop_keywords??!0),O(a.policy.quiet_hours_start),z(a.policy.quiet_hours_end),I(a.policy.default_daily_cap),L(a.policy.default_weekly_cap),A(a.policy.timezone_strategy));const h=(a.locations??[]).map(d=>({...d,hoursText:JSON.stringify(d.hours??{mon:"06:00-20:00"},null,2),depositText:JSON.stringify(d.deposit_policy??{amount:0},null,2)}));T(h),de(a.class_types??[]),De(a.staff??[]),Fe(a.events??[]),ce(a.release_notes??[]),Ue(a.slo??null),me(a.domains??[]),ue(a.sms_registrations??[])}catch(r){if(Ve(r)||t.signal.aborted)return;u(r instanceof Error?r.message:"Failed to load settings")}finally{t.signal.aborted||te(!1)}}return s(),()=>t.abort()},[]),n.useEffect(()=>{l&&(S({name:l.name??"",support_email:l.support_email??"",primary_color:l.primary_color??"#4b79ff",accent_color:l.accent_color??"#2f63ff"}),Q({subdomain:l.subdomain??"",custom_domain:l.custom_domain??""}),p(t=>{var s,r,a,h,d,i;return{...t,host:((s=l.smtp)==null?void 0:s.host)??"",port:((r=l.smtp)==null?void 0:r.port)??587,username:((a=l.smtp)==null?void 0:a.username)??"",encryption:((h=l.smtp)==null?void 0:h.encryption)??"tls",from_email:((d=l.smtp)==null?void 0:d.from_email)??l.support_email??"",from_name:((i=l.smtp)==null?void 0:i.from_name)??l.name??"",password:""}}))},[l]);async function Ae(t){t.preventDefault(),E(null);try{const s=await o("/organizations/branding",{method:"PUT",body:JSON.stringify(_)});Se(s.data),E("Branding updated.")}catch(s){E(s instanceof Error?s.message:"Unable to update branding.")}}async function Be(t){var r;if(!((r=t.target.files)!=null&&r.length))return;he(!0);const s=t.target.files[0];try{const a=new FormData;a.append("logo",s);const h=await o("/organizations/branding/logo",{method:"POST",body:a});setBrandingSettings(h.data)}catch(a){E(a instanceof Error?a.message:"Logo upload failed.")}finally{he(!1),t.target.value=""}}async function qe(t){t.preventDefault(),W(null);try{const s=await o("/organizations/domain",{method:"PUT",body:JSON.stringify(H)});setBrandingSettings(s.data),W("Domain preferences saved.")}catch(s){W(s instanceof Error?s.message:"Unable to save domain preferences.")}}async function Je(t){t.preventDefault(),K(null);try{const s=await o("/organizations/smtp",{method:"PUT",body:JSON.stringify(x)});setBrandingSettings(s.data),K("SMTP settings updated."),p(r=>({...r,password:""}))}catch(s){K(s instanceof Error?s.message:"Unable to update SMTP settings.")}}async function Re(t){var s;if((s=t.target.files)!=null&&s.length){fe(!0),je(null);try{const r=new FormData;r.append("file",t.target.files[0]);const a=await o("/imports/members",{method:"POST",body:r});Ie(a.data)}catch(r){je(r instanceof Error?r.message:"Import failed.")}finally{fe(!1),t.target.value=""}}}async function $e(){try{await o("/integrations/mindbody/import",{method:"POST",body:JSON.stringify(Ye)});const t=await o("/integrations");G(t.data??[])}catch(t){u(t instanceof Error?t.message:"Import failed")}}async function He(t){if(t.preventDefault(),t.stopPropagation(),!X)return;const s=d=>{const i=d.trim(),V=i.match(/^(\d{1,2}):([0-5]\d)(?::([0-5]\d))?$/);if(V){const g=V[1].padStart(2,"0"),Y=V[2];return Number(g)>23?null:`${g}:${Y}`}const F=i.match(/^(\d{1,2}):([0-5]\d)\s*(AM|PM)$/i);if(F){let g=Number(F[1]);const Y=F[2],_e=F[3].toUpperCase();return g===12?g=_e==="AM"?0:12:_e==="PM"&&(g+=12),g>23?null:`${g.toString().padStart(2,"0")}:${Y}`}return null},r=s(re),a=s(ne);if(!r||!a){k(!1),C("Quiet hours must be in HH:MM (24-hour) or h:mm AM/PM format.");return}C(null),k(!1);const h={quiet_hours_start:r,quiet_hours_end:a,default_daily_cap:le,default_weekly_cap:oe,timezone_strategy:ie,enforce_stop_keywords:ae};try{const i=(await o("/communications/policy",{method:"PUT",body:JSON.stringify(h)})).data;Z(i),O(i.quiet_hours_start),z(i.quiet_hours_end),I(i.default_daily_cap),L(i.default_weekly_cap),A(i.timezone_strategy),U(i.enforce_stop_keywords),k(!0)}catch(d){k(!1),d instanceof Error?C(d.message):C("Failed to update policy")}}async function ve(t){try{const s=await o("/security/mfa/preferences",{method:"PUT",body:JSON.stringify({preference:t,enabled:!0})});ee(s.data)}catch(s){u(s instanceof Error?s.message:"Failed to update MFA preferences")}}async function Qe(t){u(null);try{const s={hours:t.hoursText?JSON.parse(t.hoursText):void 0,deposit_policy:t.depositText?JSON.parse(t.depositText):void 0,cancellation_window_minutes:t.cancellation_window_minutes};await o(`/admin/locations/${t.id}`,{method:"PUT",body:JSON.stringify(s)})}catch(s){u(s instanceof Error?s.message:"Failed to update location")}}return e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(c,{title:"White-label branding",subtitle:"Logo, contact info, and palette gym members will see",children:[e.jsxs("form",{className:"grid gap-4 md:grid-cols-2",onSubmit:Ae,children:[e.jsxs("label",{className:"text-sm",children:["Brand name",e.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:_.name,onChange:t=>S(s=>({...s,name:t.target.value}))})]}),e.jsxs("label",{className:"text-sm",children:["Support email",e.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:_.support_email,onChange:t=>S(s=>({...s,support_email:t.target.value}))})]}),e.jsxs("label",{className:"text-sm",children:["Primary color",e.jsx("input",{type:"color",className:"mt-1 h-11 w-full rounded-xl border border-slate-200",value:_.primary_color,onChange:t=>S(s=>({...s,primary_color:t.target.value}))})]}),e.jsxs("label",{className:"text-sm",children:["Accent color",e.jsx("input",{type:"color",className:"mt-1 h-11 w-full rounded-xl border border-slate-200",value:_.accent_color,onChange:t=>S(s=>({...s,accent_color:t.target.value}))})]}),e.jsxs("div",{className:"md:col-span-2 flex items-center gap-3",children:[e.jsx(m,{type:"submit",children:"Save theme"}),pe&&e.jsx("span",{className:"text-sm text-emerald-600",children:pe})]})]}),e.jsxs("div",{className:"mt-6 border-t border-slate-100 pt-4",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Logo"}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-4",children:[(l==null?void 0:l.logo_url)&&e.jsx("img",{src:l.logo_url,alt:"Brand logo",className:"h-16 w-16 rounded-2xl border border-slate-200 bg-white object-contain"}),e.jsxs("label",{className:"text-sm font-medium text-brand-600 cursor-pointer",children:[e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:Be,disabled:xe}),xe?"Uploading…":"Upload logo"]})]})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsx(c,{title:"Domain & routing",subtitle:"FitFlow subdomain or branded domain for your team",children:e.jsxs("form",{className:"grid gap-4",onSubmit:qe,children:[e.jsxs("label",{className:"text-sm",children:["FitFlow subdomain",e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx("input",{className:"w-full rounded-xl border border-slate-200 px-3 py-2",value:H.subdomain,onChange:t=>Q(s=>({...s,subdomain:t.target.value})),placeholder:"mygym"}),e.jsx("span",{className:"text-xs text-slate-500",children:".fitflow.app"})]})]}),e.jsxs("label",{className:"text-sm",children:["Custom domain",e.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:H.custom_domain,onChange:t=>Q(s=>({...s,custom_domain:t.target.value})),placeholder:"members.yourclub.com"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(m,{type:"submit",children:"Save domain"}),ge&&e.jsx("span",{className:"text-sm text-emerald-600",children:ge})]})]})}),e.jsx(c,{title:"SMTP & email identity",subtitle:"Use your sending reputation and reply-to inbox",children:e.jsxs("form",{className:"grid gap-4",onSubmit:Je,children:[e.jsxs("label",{className:"text-sm",children:["Host",e.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:x.host,onChange:t=>p(s=>({...s,host:t.target.value})),required:!0})]}),e.jsxs("label",{className:"text-sm",children:["Port",e.jsx("input",{type:"number",className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:x.port,onChange:t=>p(s=>({...s,port:Number(t.target.value)})),required:!0})]}),e.jsxs("label",{className:"text-sm",children:["Username",e.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:x.username,onChange:t=>p(s=>({...s,username:t.target.value}))})]}),e.jsxs("label",{className:"text-sm",children:["Password",e.jsx("input",{type:"password",className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:x.password,onChange:t=>p(s=>({...s,password:t.target.value})),placeholder:(Ne=l==null?void 0:l.smtp)!=null&&Ne.has_password?"••••••••":""})]}),e.jsxs("label",{className:"text-sm",children:["Encryption",e.jsxs("select",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:x.encryption,onChange:t=>p(s=>({...s,encryption:t.target.value})),children:[e.jsx("option",{value:"tls",children:"TLS"}),e.jsx("option",{value:"ssl",children:"SSL"}),e.jsx("option",{value:"starttls",children:"STARTTLS"}),e.jsx("option",{value:"none",children:"None"})]})]}),e.jsxs("label",{className:"text-sm",children:["From name",e.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:x.from_name,onChange:t=>p(s=>({...s,from_name:t.target.value}))})]}),e.jsxs("label",{className:"text-sm",children:["From email",e.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:x.from_email,onChange:t=>p(s=>({...s,from_email:t.target.value}))})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(m,{type:"submit",children:"Save SMTP settings"}),ye&&e.jsx("span",{className:"text-sm text-emerald-600",children:ye})]})]})})]}),e.jsx(c,{title:"Customer import",subtitle:"Upload a CSV of members, leads, or alumni",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-slate-600",children:["CSV headers supported: ",e.jsx("code",{children:"first_name"}),", ",e.jsx("code",{children:"last_name"}),", ",e.jsx("code",{children:"email"}),", ",e.jsx("code",{children:"phone"}),","," ",e.jsx("code",{children:"status"}),", ",e.jsx("code",{children:"timezone"}),". We will provision member portal logins for any row containing an email."]}),e.jsx("input",{type:"file",accept:".csv,text/csv",onChange:Re,disabled:Le,className:"rounded-xl border border-dashed border-slate-300 px-4 py-6 text-sm text-slate-600"}),be&&e.jsx("p",{className:"text-sm text-rose-600",children:be}),w&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-sm text-slate-600",children:["Processed ",w.processed," rows · created ",w.created," members."]}),w.credentials.length>0&&e.jsx(f,{cols:[{key:"member",header:"Member"},{key:"email",header:"Email"},{key:"temp_password",header:"Temp password"}],rows:w.credentials})]})]})}),e.jsxs(c,{title:"Integrations",subtitle:"Connect your stack",children:[se&&e.jsx("div",{className:"text-sm text-red-600 mb-3",children:se}),e.jsx(f,{cols:[{key:"provider",header:"Provider"},{key:"status",header:"Status",render:t=>t==="connected"?e.jsx(M,{tone:"good",children:"Connected"}):e.jsx(M,{children:t})},{key:"last_synced_at",header:"Last synced"}],rows:we.map(t=>({...t,last_synced_at:t.last_synced_at??"Never"})),loading:b}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(m,{onClick:$e,children:"Run Mindbody mock import"})})]}),X&&e.jsx(c,{title:"Communication policy",subtitle:"Quiet hours & send caps",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("label",{className:"text-sm",children:["Quiet hours start",e.jsx("input",{name:"quiet_hours_start",type:"time",value:re,className:"mt-1 w-full border rounded-lg px-3 py-2",onChange:t=>O(t.target.value)})]}),e.jsxs("label",{className:"text-sm",children:["Quiet hours end",e.jsx("input",{name:"quiet_hours_end",type:"time",value:ne,className:"mt-1 w-full border rounded-lg px-3 py-2",onChange:t=>z(t.target.value)})]}),e.jsxs("label",{className:"text-sm",children:["Daily send cap",e.jsx("input",{name:"daily_cap",type:"number",min:0,value:le,className:"mt-1 w-full border rounded-lg px-3 py-2",onChange:t=>I(Number(t.target.value))})]}),e.jsxs("label",{className:"text-sm",children:["Weekly send cap",e.jsx("input",{name:"weekly_cap",type:"number",min:0,value:oe,className:"mt-1 w-full border rounded-lg px-3 py-2",onChange:t=>L(Number(t.target.value))})]}),e.jsxs("label",{className:"text-sm",children:["Timezone strategy",e.jsxs("select",{name:"timezone",value:ie,className:"mt-1 w-full border rounded-lg px-3 py-2",onChange:t=>A(t.target.value),children:[e.jsx("option",{value:"member_preference",children:"Member timezone"}),e.jsx("option",{value:"organization",children:"Organization timezone"})]})]}),e.jsxs("div",{className:"text-sm flex items-center justify-between border rounded-lg px-4 py-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Respect STOP keywords"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Required for SMS compliance (STOP, UNSUBSCRIBE, CANCEL)"})]}),e.jsx(Ke,{checked:ae,onChange:U})]}),e.jsx("div",{className:"md:col-span-2 flex justify-end",children:e.jsx(m,{type:"button",onClick:He,children:"Save policy"})}),B&&e.jsx("div",{className:"md:col-span-2 text-sm text-red-600",children:B}),Ce&&!B&&e.jsx("div",{className:"md:col-span-2 text-sm text-emerald-600",children:"Policy updated."})]})}),j&&e.jsxs(c,{title:"Multi-factor authentication",subtitle:"Encourage authenticator apps for staff",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Preferred method"}),e.jsx("div",{className:"text-sm text-slate-500",children:"Authenticator apps provide stronger security than SMS. SMS remains available for convenience."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{tone:j.preference==="totp"?"primary":"neutral",onClick:()=>ve("totp"),children:"Authenticator app"}),e.jsx(m,{tone:j.preference==="sms"?"primary":"neutral",onClick:()=>ve("sms"),children:"SMS backup"})]})]}),e.jsxs("div",{className:"mt-4 text-xs text-slate-500",children:["Registered methods: ",j.methods.length===0?"none":j.methods.map(t=>t.type).join(", ")]})]}),e.jsx(c,{title:"Locations",subtitle:"Hours, deposits, cancellation",children:e.jsx("div",{className:"space-y-4",children:ke.map(t=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.name}),e.jsx("div",{className:"text-xs text-slate-500",children:"Cancellation window (minutes)"})]}),e.jsx("input",{type:"number",className:"w-28 border rounded-lg px-2 py-1 text-sm",value:t.cancellation_window_minutes,onChange:s=>T(r=>r.map(a=>a.id===t.id?{...a,cancellation_window_minutes:Number(s.target.value)}:a))})]}),e.jsxs("label",{className:"text-xs text-slate-500",children:["Hours JSON",e.jsx("textarea",{className:"mt-1 w-full border rounded-lg px-2 py-1 text-xs",rows:3,value:t.hoursText??"",onChange:s=>T(r=>r.map(a=>a.id===t.id?{...a,hoursText:s.target.value}:a))})]}),e.jsxs("label",{className:"text-xs text-slate-500",children:["Deposit policy JSON",e.jsx("textarea",{className:"mt-1 w-full border rounded-lg px-2 py-1 text-xs",rows:2,value:t.depositText??"",onChange:s=>T(r=>r.map(a=>a.id===t.id?{...a,depositText:s.target.value}:a))})]}),e.jsx("div",{className:"text-right",children:e.jsx(m,{type:"button",onClick:()=>Qe(t),children:"Save"})})]},t.id))})}),e.jsxs(c,{title:"Class types",subtitle:"Programs & capacities",children:[e.jsxs("form",{className:"grid md:grid-cols-3 gap-3",onSubmit:async t=>{t.preventDefault();try{const s={name:y.name,description:y.description||void 0,default_capacity:y.default_capacity?Number(y.default_capacity):void 0},r=await o("/admin/class-types",{method:"POST",body:JSON.stringify(s)});de(a=>[...a,r.data]),P({name:"",description:"",default_capacity:""})}catch(s){u(s instanceof Error?s.message:"Failed to add class type")}},children:[e.jsx("input",{className:"border rounded-lg px-3 py-2",placeholder:"Name",value:y.name,onChange:t=>P(s=>({...s,name:t.target.value})),required:!0}),e.jsx("input",{className:"border rounded-lg px-3 py-2",placeholder:"Description",value:y.description,onChange:t=>P(s=>({...s,description:t.target.value}))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"border rounded-lg px-3 py-2 flex-1",placeholder:"Capacity",value:y.default_capacity,onChange:t=>P(s=>({...s,default_capacity:t.target.value}))}),e.jsx(m,{type:"submit",children:"Add"})]})]}),e.jsx(f,{cols:[{key:"name",header:"Name"},{key:"description",header:"Description"},{key:"default_capacity",header:"Cap"}],rows:Te,loading:b})]}),e.jsx(c,{title:"Staff & instructors",subtitle:"Roles, bios, certifications",children:e.jsx(f,{cols:[{key:"name",header:"Name"},{key:"title",header:"Title"},{key:"location",header:"Home location"},{key:"instructor",header:"Instructor"}],rows:Pe.map(t=>{var s,r;return{id:t.id,name:((s=t.user)==null?void 0:s.name)??"Unknown",title:t.title??"—",location:((r=t.primary_location)==null?void 0:r.name)??"All",instructor:t.is_instructor?e.jsx(M,{tone:"good",children:"Yes"}):e.jsx(M,{children:"No"})}}),loading:b})}),e.jsx(c,{title:"Observability",subtitle:"Events & release notes",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-700 mb-2",children:"Recent events"}),D&&e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm text-slate-800 mb-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"API p95"}),e.jsxs("div",{className:"font-semibold",children:[D.api_p95_ms??"–"," ms"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"UI p95"}),e.jsxs("div",{className:"font-semibold",children:[D.web_p95_ms??"–"," ms"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Uptime"}),e.jsxs("div",{className:"font-semibold",children:[D.uptime_percent??"–","%"]})]})]}),e.jsx(f,{cols:[{key:"event_type",header:"Type"},{key:"severity",header:"Severity"},{key:"created_at",header:"When"}],rows:Ee.map(t=>({...t,created_at:new Date(t.created_at).toLocaleString()})),loading:b})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-700 mb-2",children:"Release notes"}),e.jsxs("form",{className:"grid gap-3",onSubmit:async t=>{t.preventDefault();try{const s=await o("/observability/release-notes",{method:"POST",body:JSON.stringify(q)});ce(r=>[s.data,...r]),J({title:"",body:""})}catch(s){u(s instanceof Error?s.message:"Failed to publish note")}},children:[e.jsx("input",{className:"border rounded-lg px-3 py-2",placeholder:"Title",value:q.title,onChange:t=>J(s=>({...s,title:t.target.value})),required:!0}),e.jsx("textarea",{className:"border rounded-lg px-3 py-2",rows:3,placeholder:"Body",value:q.body,onChange:t=>J(s=>({...s,body:t.target.value})),required:!0}),e.jsx(m,{type:"submit",children:"Publish"})]}),e.jsx("ul",{className:"mt-3 space-y-2 text-sm text-slate-700",children:Me.map(t=>e.jsxs("li",{className:"border rounded-lg px-3 py-2 bg-slate-50",children:[e.jsx("div",{className:"font-semibold",children:t.title}),e.jsx("div",{className:"text-xs text-slate-500",children:t.published_at?new Date(t.published_at).toLocaleDateString():"Draft"})]},t.id))})]})]})}),e.jsx(c,{title:"Compliance",subtitle:"Domain auth & SMS registrations",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("form",{className:"grid md:grid-cols-4 gap-3",onSubmit:async t=>{t.preventDefault();try{const s=await o("/compliance/domains",{method:"POST",body:JSON.stringify(v)});me(r=>[...r,s.data]),N({domain:"",spf_record:"",dkim_selector:"",dkim_value:""})}catch(s){u(s instanceof Error?s.message:"Failed to add domain")}},children:[e.jsx("input",{className:"border rounded-lg px-3 py-2",placeholder:"Domain",value:v.domain,onChange:t=>N(s=>({...s,domain:t.target.value})),required:!0}),e.jsx("input",{className:"border rounded-lg px-3 py-2",placeholder:"SPF record",value:v.spf_record,onChange:t=>N(s=>({...s,spf_record:t.target.value}))}),e.jsx("input",{className:"border rounded-lg px-3 py-2",placeholder:"DKIM selector",value:v.dkim_selector,onChange:t=>N(s=>({...s,dkim_selector:t.target.value}))}),e.jsx("input",{className:"border rounded-lg px-3 py-2",placeholder:"DKIM value",value:v.dkim_value,onChange:t=>N(s=>({...s,dkim_value:t.target.value}))}),e.jsx("div",{className:"md:col-span-4 flex justify-end",children:e.jsx(m,{type:"submit",children:"Add domain"})})]}),e.jsx(f,{cols:[{key:"domain",header:"Domain"},{key:"status",header:"Status"},{key:"spf_record",header:"SPF"}],rows:Oe,loading:b}),e.jsxs("form",{className:"grid md:grid-cols-3 gap-3",onSubmit:async t=>{t.preventDefault();try{const s=await o("/compliance/sms",{method:"POST",body:JSON.stringify(R)});ue(r=>[...r,s.data]),$({brand_name:"",campaign_name:""})}catch(s){u(s instanceof Error?s.message:"Failed to add registration")}},children:[e.jsx("input",{className:"border rounded-lg px-3 py-2",placeholder:"Brand name",value:R.brand_name,onChange:t=>$(s=>({...s,brand_name:t.target.value})),required:!0}),e.jsx("input",{className:"border rounded-lg px-3 py-2",placeholder:"Campaign name",value:R.campaign_name,onChange:t=>$(s=>({...s,campaign_name:t.target.value})),required:!0}),e.jsx("div",{className:"flex justify-end items-center",children:e.jsx(m,{type:"submit",children:"Add campaign"})})]}),e.jsx(f,{cols:[{key:"brand_name",header:"Brand"},{key:"campaign_name",header:"Campaign"},{key:"status",header:"Status"}],rows:ze,loading:b})]})})]})}export{at as default};
