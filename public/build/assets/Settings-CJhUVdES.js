import{r as a,j as e,T as nt,a as l}from"./app-KmpLvqco.js";import{C as d}from"./Card-CN1EV_ID.js";import{B as c}from"./Button-C0QuDMMl.js";import{T as b}from"./Table-HJjVJUeR.js";import{B as q}from"./Badge-DLnXIqbw.js";/* empty css            */const lt={locations:[{name:"Downtown Studio",timezone:"America/Los_Angeles",capacity:30}],plans:[{name:"Unlimited",external_id:"UNLIMITED",price_cents:18900,currency:"USD"}],members:[{first_name:"Jordan",last_name:"Lee",email:"jordan@example.com",phone:"+14155550123",status:"active",joined_on:"2024-05-01",plan_external_id:"UNLIMITED",home_location:"Downtown Studio",tags:["streak-break"]}]};function pt(){var ke;const[Ue,se]=a.useState([]),[ae,re]=a.useState(null),[N,ne]=a.useState(null),[j,le]=a.useState(!0),[oe,u]=a.useState(null),[ie,A]=a.useState(!0),[de,J]=a.useState("21:00"),[ce,B]=a.useState("08:00"),[me,$]=a.useState(3),[ue,H]=a.useState(12),[pe,Q]=a.useState("member_preference"),[W,M]=a.useState(null),[Oe,U]=a.useState(!1),[Re,O]=a.useState([]),[ze,xe]=a.useState([]),[Le,Ie]=a.useState([]),[g,R]=a.useState({name:"",description:"",default_capacity:""}),[qe,Ae]=a.useState([]),[Je,he]=a.useState([]),[K,V]=a.useState({title:"",body:""}),[z,Be]=a.useState(null),[$e,ge]=a.useState([]),[_,S]=a.useState({domain:"",spf_record:"",dkim_selector:"",dkim_value:""}),[He,ye]=a.useState([]),[Y,G]=a.useState({brand_name:"",campaign_name:""}),[y,w]=a.useState(null),[C,k]=a.useState({name:"",support_email:"",primary_color:"#4b79ff",accent_color:"#2f63ff"}),[X,Z]=a.useState({subdomain:"",custom_domain:""}),[h,p]=a.useState({host:"",port:587,username:"",password:"",encryption:"tls",from_email:"",from_name:""}),[fe,L]=a.useState(null),[be,je]=a.useState(!1),[ve,ee]=a.useState(null),[Ne,te]=a.useState(null),[T,Qe]=a.useState(null),[We,_e]=a.useState(!1),[Se,we]=a.useState(null);a.useEffect(()=>{let t=!0;async function s(){try{le(!0);const[r,n,P,f,i,D,v,m,E,I,st,at]=await Promise.all([l("/integrations"),l("/communications/policy"),l("/security/mfa/preferences"),l("/admin/locations"),l("/admin/class-types"),l("/admin/staff"),l("/observability/events"),l("/observability/release-notes"),l("/observability/slo"),l("/compliance/domains"),l("/compliance/sms"),l("/organizations/branding")]);if(!t)return;se(r.data??[]),re(n.data??null),ne(P.data??null);const x=n.data??null;A((x==null?void 0:x.enforce_stop_keywords)??!0),x&&(J(x.quiet_hours_start),B(x.quiet_hours_end),$(x.default_daily_cap),H(x.default_weekly_cap),Q(x.timezone_strategy));const rt=(f.data??[]).map(F=>({...F,hoursText:JSON.stringify(F.hours??{mon:"06:00-20:00"},null,2),depositText:JSON.stringify(F.deposit_policy??{amount:0},null,2)}));O(rt),xe(i.data??[]),Ie(D.data??[]),Ae(v.data??[]),he(m.data??[]),Be(E.data??null),ge(I.data??[]),ye(st.data??[]);const o=at.data??null;w(o),o&&(k({name:o.name??"",support_email:o.support_email??"",primary_color:o.primary_color??"#4b79ff",accent_color:o.accent_color??"#2f63ff"}),Z({subdomain:o.subdomain??"",custom_domain:o.custom_domain??""}),p(F=>{var Te,Pe,De,Ee,Fe,Me;return{...F,host:((Te=o.smtp)==null?void 0:Te.host)??"",port:((Pe=o.smtp)==null?void 0:Pe.port)??587,username:((De=o.smtp)==null?void 0:De.username)??"",encryption:((Ee=o.smtp)==null?void 0:Ee.encryption)??"tls",from_email:((Fe=o.smtp)==null?void 0:Fe.from_email)??o.support_email??"",from_name:((Me=o.smtp)==null?void 0:Me.from_name)??o.name??"",password:""}}))}catch(r){if(!t)return;u(r instanceof Error?r.message:"Failed to load settings")}finally{t&&le(!1)}}return s(),()=>{t=!1}},[]);async function Ke(t){t.preventDefault(),L(null);try{const s=await l("/organizations/branding",{method:"PUT",body:JSON.stringify(C)});w(s.data),L("Branding updated.")}catch(s){L(s instanceof Error?s.message:"Unable to update branding.")}}async function Ve(t){var r;if(!((r=t.target.files)!=null&&r.length))return;je(!0);const s=t.target.files[0];try{const n=new FormData;n.append("logo",s);const P=await l("/organizations/branding/logo",{method:"POST",body:n});w(P.data)}catch(n){L(n instanceof Error?n.message:"Logo upload failed.")}finally{je(!1),t.target.value=""}}async function Ye(t){t.preventDefault(),ee(null);try{const s=await l("/organizations/domain",{method:"PUT",body:JSON.stringify(X)});w(s.data),ee("Domain preferences saved.")}catch(s){ee(s instanceof Error?s.message:"Unable to save domain preferences.")}}async function Ge(t){t.preventDefault(),te(null);try{const s=await l("/organizations/smtp",{method:"PUT",body:JSON.stringify(h)});w(s.data),te("SMTP settings updated."),p(r=>({...r,password:""}))}catch(s){te(s instanceof Error?s.message:"Unable to update SMTP settings.")}}async function Xe(t){var s;if((s=t.target.files)!=null&&s.length){_e(!0),we(null);try{const r=new FormData;r.append("file",t.target.files[0]);const n=await l("/imports/members",{method:"POST",body:r});Qe(n.data)}catch(r){we(r instanceof Error?r.message:"Import failed.")}finally{_e(!1),t.target.value=""}}}async function Ze(){try{await l("/integrations/mindbody/import",{method:"POST",body:JSON.stringify(lt)});const t=await l("/integrations");se(t.data??[])}catch(t){u(t instanceof Error?t.message:"Import failed")}}async function et(t){if(t.preventDefault(),t.stopPropagation(),!ae)return;const s=f=>{const i=f.trim(),D=i.match(/^(\d{1,2}):([0-5]\d)(?::([0-5]\d))?$/);if(D){const m=D[1].padStart(2,"0"),E=D[2];return Number(m)>23?null:`${m}:${E}`}const v=i.match(/^(\d{1,2}):([0-5]\d)\s*(AM|PM)$/i);if(v){let m=Number(v[1]);const E=v[2],I=v[3].toUpperCase();return m===12?m=I==="AM"?0:12:I==="PM"&&(m+=12),m>23?null:`${m.toString().padStart(2,"0")}:${E}`}return null},r=s(de),n=s(ce);if(!r||!n){U(!1),M("Quiet hours must be in HH:MM (24-hour) or h:mm AM/PM format.");return}M(null),U(!1);const P={quiet_hours_start:r,quiet_hours_end:n,default_daily_cap:me,default_weekly_cap:ue,timezone_strategy:pe,enforce_stop_keywords:ie};try{const i=(await l("/communications/policy",{method:"PUT",body:JSON.stringify(P)})).data;re(i),J(i.quiet_hours_start),B(i.quiet_hours_end),$(i.default_daily_cap),H(i.default_weekly_cap),Q(i.timezone_strategy),A(i.enforce_stop_keywords),U(!0)}catch(f){U(!1),f instanceof Error?M(f.message):M("Failed to update policy")}}async function Ce(t){try{const s=await l("/security/mfa/preferences",{method:"PUT",body:JSON.stringify({preference:t,enabled:!0})});ne(s.data)}catch(s){u(s instanceof Error?s.message:"Failed to update MFA preferences")}}async function tt(t){u(null);try{const s={hours:t.hoursText?JSON.parse(t.hoursText):void 0,deposit_policy:t.depositText?JSON.parse(t.depositText):void 0,cancellation_window_minutes:t.cancellation_window_minutes};await l(`/admin/locations/${t.id}`,{method:"PUT",body:JSON.stringify(s)})}catch(s){u(s instanceof Error?s.message:"Failed to update location")}}return e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(d,{title:"White-label branding",subtitle:"Logo, contact info, and palette gym members will see",children:[e.jsxs("form",{className:"grid gap-4 md:grid-cols-2",onSubmit:Ke,children:[e.jsxs("label",{className:"text-sm",children:["Brand name",e.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:C.name,onChange:t=>k(s=>({...s,name:t.target.value}))})]}),e.jsxs("label",{className:"text-sm",children:["Support email",e.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:C.support_email,onChange:t=>k(s=>({...s,support_email:t.target.value}))})]}),e.jsxs("label",{className:"text-sm",children:["Primary color",e.jsx("input",{type:"color",className:"mt-1 h-11 w-full rounded-xl border border-slate-200",value:C.primary_color,onChange:t=>k(s=>({...s,primary_color:t.target.value}))})]}),e.jsxs("label",{className:"text-sm",children:["Accent color",e.jsx("input",{type:"color",className:"mt-1 h-11 w-full rounded-xl border border-slate-200",value:C.accent_color,onChange:t=>k(s=>({...s,accent_color:t.target.value}))})]}),e.jsxs("div",{className:"md:col-span-2 flex items-center gap-3",children:[e.jsx(c,{type:"submit",children:"Save theme"}),fe&&e.jsx("span",{className:"text-sm text-emerald-600",children:fe})]})]}),e.jsxs("div",{className:"mt-6 border-t border-slate-100 pt-4",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Logo"}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-4",children:[(y==null?void 0:y.logo_url)&&e.jsx("img",{src:y.logo_url,alt:"Brand logo",className:"h-16 w-16 rounded-2xl border border-slate-200 bg-white object-contain"}),e.jsxs("label",{className:"text-sm font-medium text-brand-600 cursor-pointer",children:[e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:Ve,disabled:be}),be?"Uploading…":"Upload logo"]})]})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsx(d,{title:"Domain & routing",subtitle:"FitFlow subdomain or branded domain for your team",children:e.jsxs("form",{className:"grid gap-4",onSubmit:Ye,children:[e.jsxs("label",{className:"text-sm",children:["FitFlow subdomain",e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx("input",{className:"w-full rounded-xl border border-slate-200 px-3 py-2",value:X.subdomain,onChange:t=>Z(s=>({...s,subdomain:t.target.value})),placeholder:"mygym"}),e.jsx("span",{className:"text-xs text-slate-500",children:".fitflow.app"})]})]}),e.jsxs("label",{className:"text-sm",children:["Custom domain",e.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:X.custom_domain,onChange:t=>Z(s=>({...s,custom_domain:t.target.value})),placeholder:"members.yourclub.com"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(c,{type:"submit",children:"Save domain"}),ve&&e.jsx("span",{className:"text-sm text-emerald-600",children:ve})]})]})}),e.jsx(d,{title:"SMTP & email identity",subtitle:"Use your sending reputation and reply-to inbox",children:e.jsxs("form",{className:"grid gap-4",onSubmit:Ge,children:[e.jsxs("label",{className:"text-sm",children:["Host",e.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:h.host,onChange:t=>p(s=>({...s,host:t.target.value})),required:!0})]}),e.jsxs("label",{className:"text-sm",children:["Port",e.jsx("input",{type:"number",className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:h.port,onChange:t=>p(s=>({...s,port:Number(t.target.value)})),required:!0})]}),e.jsxs("label",{className:"text-sm",children:["Username",e.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:h.username,onChange:t=>p(s=>({...s,username:t.target.value}))})]}),e.jsxs("label",{className:"text-sm",children:["Password",e.jsx("input",{type:"password",className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:h.password,onChange:t=>p(s=>({...s,password:t.target.value})),placeholder:(ke=y==null?void 0:y.smtp)!=null&&ke.has_password?"••••••••":""})]}),e.jsxs("label",{className:"text-sm",children:["Encryption",e.jsxs("select",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:h.encryption,onChange:t=>p(s=>({...s,encryption:t.target.value})),children:[e.jsx("option",{value:"tls",children:"TLS"}),e.jsx("option",{value:"ssl",children:"SSL"}),e.jsx("option",{value:"starttls",children:"STARTTLS"}),e.jsx("option",{value:"none",children:"None"})]})]}),e.jsxs("label",{className:"text-sm",children:["From name",e.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:h.from_name,onChange:t=>p(s=>({...s,from_name:t.target.value}))})]}),e.jsxs("label",{className:"text-sm",children:["From email",e.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:h.from_email,onChange:t=>p(s=>({...s,from_email:t.target.value}))})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(c,{type:"submit",children:"Save SMTP settings"}),Ne&&e.jsx("span",{className:"text-sm text-emerald-600",children:Ne})]})]})})]}),e.jsx(d,{title:"Customer import",subtitle:"Upload a CSV of members, leads, or alumni",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-slate-600",children:["CSV headers supported: ",e.jsx("code",{children:"first_name"}),", ",e.jsx("code",{children:"last_name"}),", ",e.jsx("code",{children:"email"}),", ",e.jsx("code",{children:"phone"}),","," ",e.jsx("code",{children:"status"}),", ",e.jsx("code",{children:"timezone"}),". We will provision member portal logins for any row containing an email."]}),e.jsx("input",{type:"file",accept:".csv,text/csv",onChange:Xe,disabled:We,className:"rounded-xl border border-dashed border-slate-300 px-4 py-6 text-sm text-slate-600"}),Se&&e.jsx("p",{className:"text-sm text-rose-600",children:Se}),T&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-sm text-slate-600",children:["Processed ",T.processed," rows · created ",T.created," members."]}),T.credentials.length>0&&e.jsx(b,{cols:[{key:"member",header:"Member"},{key:"email",header:"Email"},{key:"temp_password",header:"Temp password"}],rows:T.credentials})]})]})}),e.jsxs(d,{title:"Integrations",subtitle:"Connect your stack",children:[oe&&e.jsx("div",{className:"text-sm text-red-600 mb-3",children:oe}),e.jsx(b,{cols:[{key:"provider",header:"Provider"},{key:"status",header:"Status",render:t=>t==="connected"?e.jsx(q,{tone:"good",children:"Connected"}):e.jsx(q,{children:t})},{key:"last_synced_at",header:"Last synced"}],rows:Ue.map(t=>({...t,last_synced_at:t.last_synced_at??"Never"})),loading:j}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(c,{onClick:Ze,children:"Run Mindbody mock import"})})]}),ae&&e.jsx(d,{title:"Communication policy",subtitle:"Quiet hours & send caps",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("label",{className:"text-sm",children:["Quiet hours start",e.jsx("input",{name:"quiet_hours_start",type:"time",value:de,className:"mt-1 w-full border rounded-lg px-3 py-2",onChange:t=>J(t.target.value)})]}),e.jsxs("label",{className:"text-sm",children:["Quiet hours end",e.jsx("input",{name:"quiet_hours_end",type:"time",value:ce,className:"mt-1 w-full border rounded-lg px-3 py-2",onChange:t=>B(t.target.value)})]}),e.jsxs("label",{className:"text-sm",children:["Daily send cap",e.jsx("input",{name:"daily_cap",type:"number",min:0,value:me,className:"mt-1 w-full border rounded-lg px-3 py-2",onChange:t=>$(Number(t.target.value))})]}),e.jsxs("label",{className:"text-sm",children:["Weekly send cap",e.jsx("input",{name:"weekly_cap",type:"number",min:0,value:ue,className:"mt-1 w-full border rounded-lg px-3 py-2",onChange:t=>H(Number(t.target.value))})]}),e.jsxs("label",{className:"text-sm",children:["Timezone strategy",e.jsxs("select",{name:"timezone",value:pe,className:"mt-1 w-full border rounded-lg px-3 py-2",onChange:t=>Q(t.target.value),children:[e.jsx("option",{value:"member_preference",children:"Member timezone"}),e.jsx("option",{value:"organization",children:"Organization timezone"})]})]}),e.jsxs("div",{className:"text-sm flex items-center justify-between border rounded-lg px-4 py-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Respect STOP keywords"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Required for SMS compliance (STOP, UNSUBSCRIBE, CANCEL)"})]}),e.jsx(nt,{checked:ie,onChange:A})]}),e.jsx("div",{className:"md:col-span-2 flex justify-end",children:e.jsx(c,{type:"button",onClick:et,children:"Save policy"})}),W&&e.jsx("div",{className:"md:col-span-2 text-sm text-red-600",children:W}),Oe&&!W&&e.jsx("div",{className:"md:col-span-2 text-sm text-emerald-600",children:"Policy updated."})]})}),N&&e.jsxs(d,{title:"Multi-factor authentication",subtitle:"Encourage authenticator apps for staff",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Preferred method"}),e.jsx("div",{className:"text-sm text-slate-500",children:"Authenticator apps provide stronger security than SMS. SMS remains available for convenience."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{tone:N.preference==="totp"?"primary":"neutral",onClick:()=>Ce("totp"),children:"Authenticator app"}),e.jsx(c,{tone:N.preference==="sms"?"primary":"neutral",onClick:()=>Ce("sms"),children:"SMS backup"})]})]}),e.jsxs("div",{className:"mt-4 text-xs text-slate-500",children:["Registered methods: ",N.methods.length===0?"none":N.methods.map(t=>t.type).join(", ")]})]}),e.jsx(d,{title:"Locations",subtitle:"Hours, deposits, cancellation",children:e.jsx("div",{className:"space-y-4",children:Re.map(t=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.name}),e.jsx("div",{className:"text-xs text-slate-500",children:"Cancellation window (minutes)"})]}),e.jsx("input",{type:"number",className:"w-28 border rounded-lg px-2 py-1 text-sm",value:t.cancellation_window_minutes,onChange:s=>O(r=>r.map(n=>n.id===t.id?{...n,cancellation_window_minutes:Number(s.target.value)}:n))})]}),e.jsxs("label",{className:"text-xs text-slate-500",children:["Hours JSON",e.jsx("textarea",{className:"mt-1 w-full border rounded-lg px-2 py-1 text-xs",rows:3,value:t.hoursText??"",onChange:s=>O(r=>r.map(n=>n.id===t.id?{...n,hoursText:s.target.value}:n))})]}),e.jsxs("label",{className:"text-xs text-slate-500",children:["Deposit policy JSON",e.jsx("textarea",{className:"mt-1 w-full border rounded-lg px-2 py-1 text-xs",rows:2,value:t.depositText??"",onChange:s=>O(r=>r.map(n=>n.id===t.id?{...n,depositText:s.target.value}:n))})]}),e.jsx("div",{className:"text-right",children:e.jsx(c,{type:"button",onClick:()=>tt(t),children:"Save"})})]},t.id))})}),e.jsxs(d,{title:"Class types",subtitle:"Programs & capacities",children:[e.jsxs("form",{className:"grid md:grid-cols-3 gap-3",onSubmit:async t=>{t.preventDefault();try{const s={name:g.name,description:g.description||void 0,default_capacity:g.default_capacity?Number(g.default_capacity):void 0},r=await l("/admin/class-types",{method:"POST",body:JSON.stringify(s)});xe(n=>[...n,r.data]),R({name:"",description:"",default_capacity:""})}catch(s){u(s instanceof Error?s.message:"Failed to add class type")}},children:[e.jsx("input",{className:"border rounded-lg px-3 py-2",placeholder:"Name",value:g.name,onChange:t=>R(s=>({...s,name:t.target.value})),required:!0}),e.jsx("input",{className:"border rounded-lg px-3 py-2",placeholder:"Description",value:g.description,onChange:t=>R(s=>({...s,description:t.target.value}))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"border rounded-lg px-3 py-2 flex-1",placeholder:"Capacity",value:g.default_capacity,onChange:t=>R(s=>({...s,default_capacity:t.target.value}))}),e.jsx(c,{type:"submit",children:"Add"})]})]}),e.jsx(b,{cols:[{key:"name",header:"Name"},{key:"description",header:"Description"},{key:"default_capacity",header:"Cap"}],rows:ze,loading:j})]}),e.jsx(d,{title:"Staff & instructors",subtitle:"Roles, bios, certifications",children:e.jsx(b,{cols:[{key:"name",header:"Name"},{key:"title",header:"Title"},{key:"location",header:"Home location"},{key:"instructor",header:"Instructor"}],rows:Le.map(t=>{var s,r;return{id:t.id,name:((s=t.user)==null?void 0:s.name)??"Unknown",title:t.title??"—",location:((r=t.primary_location)==null?void 0:r.name)??"All",instructor:t.is_instructor?e.jsx(q,{tone:"good",children:"Yes"}):e.jsx(q,{children:"No"})}}),loading:j})}),e.jsx(d,{title:"Observability",subtitle:"Events & release notes",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-700 mb-2",children:"Recent events"}),z&&e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm text-slate-800 mb-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"API p95"}),e.jsxs("div",{className:"font-semibold",children:[z.api_p95_ms??"–"," ms"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"UI p95"}),e.jsxs("div",{className:"font-semibold",children:[z.web_p95_ms??"–"," ms"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Uptime"}),e.jsxs("div",{className:"font-semibold",children:[z.uptime_percent??"–","%"]})]})]}),e.jsx(b,{cols:[{key:"event_type",header:"Type"},{key:"severity",header:"Severity"},{key:"created_at",header:"When"}],rows:qe.map(t=>({...t,created_at:new Date(t.created_at).toLocaleString()})),loading:j})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-700 mb-2",children:"Release notes"}),e.jsxs("form",{className:"grid gap-3",onSubmit:async t=>{t.preventDefault();try{const s=await l("/observability/release-notes",{method:"POST",body:JSON.stringify(K)});he(r=>[s.data,...r]),V({title:"",body:""})}catch(s){u(s instanceof Error?s.message:"Failed to publish note")}},children:[e.jsx("input",{className:"border rounded-lg px-3 py-2",placeholder:"Title",value:K.title,onChange:t=>V(s=>({...s,title:t.target.value})),required:!0}),e.jsx("textarea",{className:"border rounded-lg px-3 py-2",rows:3,placeholder:"Body",value:K.body,onChange:t=>V(s=>({...s,body:t.target.value})),required:!0}),e.jsx(c,{type:"submit",children:"Publish"})]}),e.jsx("ul",{className:"mt-3 space-y-2 text-sm text-slate-700",children:Je.map(t=>e.jsxs("li",{className:"border rounded-lg px-3 py-2 bg-slate-50",children:[e.jsx("div",{className:"font-semibold",children:t.title}),e.jsx("div",{className:"text-xs text-slate-500",children:t.published_at?new Date(t.published_at).toLocaleDateString():"Draft"})]},t.id))})]})]})}),e.jsx(d,{title:"Compliance",subtitle:"Domain auth & SMS registrations",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("form",{className:"grid md:grid-cols-4 gap-3",onSubmit:async t=>{t.preventDefault();try{const s=await l("/compliance/domains",{method:"POST",body:JSON.stringify(_)});ge(r=>[...r,s.data]),S({domain:"",spf_record:"",dkim_selector:"",dkim_value:""})}catch(s){u(s instanceof Error?s.message:"Failed to add domain")}},children:[e.jsx("input",{className:"border rounded-lg px-3 py-2",placeholder:"Domain",value:_.domain,onChange:t=>S(s=>({...s,domain:t.target.value})),required:!0}),e.jsx("input",{className:"border rounded-lg px-3 py-2",placeholder:"SPF record",value:_.spf_record,onChange:t=>S(s=>({...s,spf_record:t.target.value}))}),e.jsx("input",{className:"border rounded-lg px-3 py-2",placeholder:"DKIM selector",value:_.dkim_selector,onChange:t=>S(s=>({...s,dkim_selector:t.target.value}))}),e.jsx("input",{className:"border rounded-lg px-3 py-2",placeholder:"DKIM value",value:_.dkim_value,onChange:t=>S(s=>({...s,dkim_value:t.target.value}))}),e.jsx("div",{className:"md:col-span-4 flex justify-end",children:e.jsx(c,{type:"submit",children:"Add domain"})})]}),e.jsx(b,{cols:[{key:"domain",header:"Domain"},{key:"status",header:"Status"},{key:"spf_record",header:"SPF"}],rows:$e,loading:j}),e.jsxs("form",{className:"grid md:grid-cols-3 gap-3",onSubmit:async t=>{t.preventDefault();try{const s=await l("/compliance/sms",{method:"POST",body:JSON.stringify(Y)});ye(r=>[...r,s.data]),G({brand_name:"",campaign_name:""})}catch(s){u(s instanceof Error?s.message:"Failed to add registration")}},children:[e.jsx("input",{className:"border rounded-lg px-3 py-2",placeholder:"Brand name",value:Y.brand_name,onChange:t=>G(s=>({...s,brand_name:t.target.value})),required:!0}),e.jsx("input",{className:"border rounded-lg px-3 py-2",placeholder:"Campaign name",value:Y.campaign_name,onChange:t=>G(s=>({...s,campaign_name:t.target.value})),required:!0}),e.jsx("div",{className:"flex justify-end items-center",children:e.jsx(c,{type:"submit",children:"Add campaign"})})]}),e.jsx(b,{cols:[{key:"brand_name",header:"Brand"},{key:"campaign_name",header:"Campaign"},{key:"status",header:"Status"}],rows:He,loading:j})]})})]})}export{pt as default};
