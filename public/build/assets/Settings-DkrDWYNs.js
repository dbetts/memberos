import{j as e,k as Ve,r as n,a as i,i as Ye}from"./app-CkmwQ5Pl.js";import{C as m}from"./Card-huvhWaid.js";import{B as u}from"./Button-BBzaGNvL.js";import{T as j}from"./Table-Bh6uhAN_.js";import{B as O}from"./Badge-CVi-YSRS.js";import{T as o}from"./TextInput-CcTkSXZv.js";import{S as Ce}from"./SelectInput-CyF3PkuI.js";/* empty css            */function Ge({checked:l,onChange:b}){return e.jsx("button",{"aria-pressed":l,onClick:()=>b(!l),className:`w-14 h-6 rounded-full transition relative ${l?"bg-brand-500":"bg-slate-300"}`,children:e.jsx("span",{className:`absolute top-0.5 left-0 inline-block h-5 w-5 rounded-full bg-white shadow transition ${l?"translate-x-5":"translate-x-1"}`})})}const Xe={locations:[{name:"Downtown Studio",timezone:"America/Los_Angeles",capacity:30}],plans:[{name:"Unlimited",external_id:"UNLIMITED",price_cents:18900,currency:"USD"}],members:[{first_name:"Jordan",last_name:"Lee",email:"jordan@example.com",phone:"+14155550123",status:"active",joined_on:"2024-05-01",plan_external_id:"UNLIMITED",home_location:"Downtown Studio",tags:["streak-break"]}]};function ls(){var Se;const{branding:l,setBranding:b}=Ve(),[ke,Z]=n.useState([]),[ee,se]=n.useState(null),[N,te]=n.useState(null),[v,ae]=n.useState(!0),[re,p]=n.useState(null),[ne,I]=n.useState(!0),[oe,z]=n.useState("21:00"),[le,L]=n.useState("08:00"),[ie,A]=n.useState(3),[de,q]=n.useState(12),[ce,J]=n.useState("member_preference"),[B,T]=n.useState(null),[Te,P]=n.useState(!1),[Pe,D]=n.useState([]),[De,me]=n.useState([]),[Ee,Fe]=n.useState([]),[f,E]=n.useState({name:"",description:"",default_capacity:""}),[Me,Ue]=n.useState([]),[Oe,ue]=n.useState([]),[R,$]=n.useState({title:"",body:""}),[F,Ie]=n.useState(null),[ze,pe]=n.useState([]),[_,S]=n.useState({domain:"",spf_record:"",dkim_selector:"",dkim_value:""}),[Le,xe]=n.useState([]),[H,Q]=n.useState({brand_name:"",campaign_name:""}),[w,C]=n.useState({name:"",support_email:"",primary_color:"#4b79ff",accent_color:"#2f63ff"}),[W,K]=n.useState({subdomain:"",custom_domain:""}),[h,x]=n.useState({host:"",port:587,username:"",password:"",encryption:"tls",from_email:"",from_name:""}),[he,M]=n.useState(null),[ge,ye]=n.useState(!1),[fe,V]=n.useState(null),[je,Y]=n.useState(null),[k,Ae]=n.useState(null),[qe,be]=n.useState(!1),[ve,Ne]=n.useState(null);n.useEffect(()=>{const s=new AbortController;async function t(){try{ae(!0),p(null);const r=await i("/settings/overview",{signal:s.signal});if(s.signal.aborted)return;const a=r.data;a.organization_id&&localStorage.setItem("fitflow.orgId",a.organization_id),Z(a.integrations??[]),se(a.policy??null),te(a.mfa??null),a.policy&&(I(a.policy.enforce_stop_keywords??!0),z(a.policy.quiet_hours_start),L(a.policy.quiet_hours_end),A(a.policy.default_daily_cap),q(a.policy.default_weekly_cap),J(a.policy.timezone_strategy));const g=(a.locations??[]).map(c=>({...c,hoursText:JSON.stringify(c.hours??{mon:"06:00-20:00"},null,2),depositText:JSON.stringify(c.deposit_policy??{amount:0},null,2)}));D(g),me(a.class_types??[]),Fe(a.staff??[]),Ue(a.events??[]),ue(a.release_notes??[]),Ie(a.slo??null),pe(a.domains??[]),xe(a.sms_registrations??[])}catch(r){if(Ye(r)||s.signal.aborted)return;p(r instanceof Error?r.message:"Failed to load settings")}finally{s.signal.aborted||ae(!1)}}return t(),()=>s.abort()},[]),n.useEffect(()=>{l&&(C({name:l.name??"",support_email:l.support_email??"",primary_color:l.primary_color??"#4b79ff",accent_color:l.accent_color??"#2f63ff"}),K({subdomain:l.subdomain??"",custom_domain:l.custom_domain??""}),x(s=>{var t,r,a,g,c,d;return{...s,host:((t=l.smtp)==null?void 0:t.host)??"",port:((r=l.smtp)==null?void 0:r.port)??587,username:((a=l.smtp)==null?void 0:a.username)??"",encryption:((g=l.smtp)==null?void 0:g.encryption)??"tls",from_email:((c=l.smtp)==null?void 0:c.from_email)??l.support_email??"",from_name:((d=l.smtp)==null?void 0:d.from_name)??l.name??"",password:""}}))},[l]);async function Je(s){s.preventDefault(),M(null);try{const t=await i("/organizations/branding",{method:"PUT",body:JSON.stringify(w)});b(t.data),M("Branding updated.")}catch(t){M(t instanceof Error?t.message:"Unable to update branding.")}}async function Be(s){var r;if(!((r=s.target.files)!=null&&r.length))return;ye(!0);const t=s.target.files[0];try{const a=new FormData;a.append("logo",t);const g=await i("/organizations/branding/logo",{method:"POST",body:a});b(g.data)}catch(a){M(a instanceof Error?a.message:"Logo upload failed.")}finally{ye(!1),s.target.value=""}}async function Re(s){s.preventDefault(),V(null);try{const t=await i("/organizations/domain",{method:"PUT",body:JSON.stringify(W)});b(t.data),V("Domain preferences saved.")}catch(t){V(t instanceof Error?t.message:"Unable to save domain preferences.")}}async function $e(s){s.preventDefault(),Y(null);try{const t=await i("/organizations/smtp",{method:"PUT",body:JSON.stringify(h)});b(t.data),Y("SMTP settings updated."),x(r=>({...r,password:""}))}catch(t){Y(t instanceof Error?t.message:"Unable to update SMTP settings.")}}async function He(s){var t;if((t=s.target.files)!=null&&t.length){be(!0),Ne(null);try{const r=new FormData;r.append("file",s.target.files[0]);const a=await i("/imports/members",{method:"POST",body:r});Ae(a.data)}catch(r){Ne(r instanceof Error?r.message:"Import failed.")}finally{be(!1),s.target.value=""}}}async function Qe(){try{await i("/integrations/mindbody/import",{method:"POST",body:JSON.stringify(Xe)});const s=await i("/integrations");Z(s.data??[])}catch(s){p(s instanceof Error?s.message:"Import failed")}}async function We(s){if(s.preventDefault(),s.stopPropagation(),!ee)return;const t=c=>{const d=c.trim(),G=d.match(/^(\d{1,2}):([0-5]\d)(?::([0-5]\d))?$/);if(G){const y=G[1].padStart(2,"0"),X=G[2];return Number(y)>23?null:`${y}:${X}`}const U=d.match(/^(\d{1,2}):([0-5]\d)\s*(AM|PM)$/i);if(U){let y=Number(U[1]);const X=U[2],we=U[3].toUpperCase();return y===12?y=we==="AM"?0:12:we==="PM"&&(y+=12),y>23?null:`${y.toString().padStart(2,"0")}:${X}`}return null},r=t(oe),a=t(le);if(!r||!a){P(!1),T("Quiet hours must be in HH:MM (24-hour) or h:mm AM/PM format.");return}T(null),P(!1);const g={quiet_hours_start:r,quiet_hours_end:a,default_daily_cap:ie,default_weekly_cap:de,timezone_strategy:ce,enforce_stop_keywords:ne};try{const d=(await i("/communications/policy",{method:"PUT",body:JSON.stringify(g)})).data;se(d),z(d.quiet_hours_start),L(d.quiet_hours_end),A(d.default_daily_cap),q(d.default_weekly_cap),J(d.timezone_strategy),I(d.enforce_stop_keywords),P(!0)}catch(c){P(!1),c instanceof Error?T(c.message):T("Failed to update policy")}}async function _e(s){try{const t=await i("/security/mfa/preferences",{method:"PUT",body:JSON.stringify({preference:s,enabled:!0})});te(t.data)}catch(t){p(t instanceof Error?t.message:"Failed to update MFA preferences")}}async function Ke(s){p(null);try{const t={hours:s.hoursText?JSON.parse(s.hoursText):void 0,deposit_policy:s.depositText?JSON.parse(s.depositText):void 0,cancellation_window_minutes:s.cancellation_window_minutes};await i(`/admin/locations/${s.id}`,{method:"PUT",body:JSON.stringify(t)})}catch(t){p(t instanceof Error?t.message:"Failed to update location")}}return e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(m,{title:"White-label branding",subtitle:"Logo, contact info, and palette gym members will see",children:[e.jsxs("form",{className:"grid gap-4 md:grid-cols-2",onSubmit:Je,children:[e.jsxs("label",{className:"text-sm",children:["Brand name",e.jsx(o,{className:"mt-1",value:w.name,onChange:s=>C(t=>({...t,name:s.target.value}))})]}),e.jsxs("label",{className:"text-sm",children:["Support email",e.jsx(o,{className:"mt-1",value:w.support_email,onChange:s=>C(t=>({...t,support_email:s.target.value}))})]}),e.jsxs("label",{className:"text-sm",children:["Primary color",e.jsx(o,{type:"color",className:"mt-1 h-11",value:w.primary_color,onChange:s=>C(t=>({...t,primary_color:s.target.value}))})]}),e.jsxs("label",{className:"text-sm",children:["Accent color",e.jsx(o,{type:"color",className:"mt-1 h-11",value:w.accent_color,onChange:s=>C(t=>({...t,accent_color:s.target.value}))})]}),e.jsxs("div",{className:"md:col-span-2 flex items-center gap-3",children:[e.jsx(u,{type:"submit",children:"Save theme"}),he&&e.jsx("span",{className:"text-sm text-emerald-600",children:he})]})]}),e.jsxs("div",{className:"mt-6 border-t border-slate-100 pt-4",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Logo"}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-4",children:[(l==null?void 0:l.logo_url)&&e.jsx("img",{src:l.logo_url,alt:"Brand logo",className:"h-16 w-16 rounded-2xl border border-slate-200 bg-white object-contain"}),e.jsxs("label",{className:"text-sm font-medium text-brand-600 cursor-pointer",children:[e.jsx(o,{type:"file",className:"hidden border-0 p-0",accept:"image/*",onChange:Be,disabled:ge}),ge?"Uploading…":"Upload logo"]})]})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsx(m,{title:"Domain & routing",subtitle:"FitFlow subdomain or branded domain for your team",children:e.jsxs("form",{className:"grid gap-4",onSubmit:Re,children:[e.jsxs("label",{className:"text-sm",children:["FitFlow subdomain",e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx(o,{className:"w-full",value:W.subdomain,onChange:s=>K(t=>({...t,subdomain:s.target.value})),placeholder:"mygym"}),e.jsx("span",{className:"text-xs text-slate-500",children:".fitflow.app"})]})]}),e.jsxs("label",{className:"text-sm",children:["Custom domain",e.jsx(o,{className:"mt-1",value:W.custom_domain,onChange:s=>K(t=>({...t,custom_domain:s.target.value})),placeholder:"members.yourclub.com"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{type:"submit",children:"Save domain"}),fe&&e.jsx("span",{className:"text-sm text-emerald-600",children:fe})]})]})}),e.jsx(m,{title:"SMTP & email identity",subtitle:"Use your sending reputation and reply-to inbox",children:e.jsxs("form",{className:"grid gap-4",onSubmit:$e,children:[e.jsxs("label",{className:"text-sm",children:["Host",e.jsx(o,{className:"mt-1",value:h.host,onChange:s=>x(t=>({...t,host:s.target.value})),required:!0})]}),e.jsxs("label",{className:"text-sm",children:["Port",e.jsx(o,{type:"number",className:"mt-1",value:h.port,onChange:s=>x(t=>({...t,port:Number(s.target.value)})),required:!0})]}),e.jsxs("label",{className:"text-sm",children:["Username",e.jsx(o,{className:"mt-1",value:h.username,onChange:s=>x(t=>({...t,username:s.target.value}))})]}),e.jsxs("label",{className:"text-sm",children:["Password",e.jsx(o,{type:"password",className:"mt-1",value:h.password,onChange:s=>x(t=>({...t,password:s.target.value})),placeholder:(Se=l==null?void 0:l.smtp)!=null&&Se.has_password?"••••••••":""})]}),e.jsxs("label",{className:"text-sm",children:["Encryption",e.jsxs(Ce,{className:"mt-1",value:h.encryption,onChange:s=>x(t=>({...t,encryption:s.target.value})),children:[e.jsx("option",{value:"tls",children:"TLS"}),e.jsx("option",{value:"ssl",children:"SSL"}),e.jsx("option",{value:"starttls",children:"STARTTLS"}),e.jsx("option",{value:"none",children:"None"})]})]}),e.jsxs("label",{className:"text-sm",children:["From name",e.jsx(o,{className:"mt-1",value:h.from_name,onChange:s=>x(t=>({...t,from_name:s.target.value}))})]}),e.jsxs("label",{className:"text-sm",children:["From email",e.jsx(o,{className:"mt-1",value:h.from_email,onChange:s=>x(t=>({...t,from_email:s.target.value}))})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{type:"submit",children:"Save SMTP settings"}),je&&e.jsx("span",{className:"text-sm text-emerald-600",children:je})]})]})})]}),e.jsx(m,{title:"Customer import",subtitle:"Upload a CSV of members, leads, or alumni",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-slate-600",children:["CSV headers supported: ",e.jsx("code",{children:"first_name"}),", ",e.jsx("code",{children:"last_name"}),", ",e.jsx("code",{children:"email"}),", ",e.jsx("code",{children:"phone"}),","," ",e.jsx("code",{children:"status"}),", ",e.jsx("code",{children:"timezone"}),". We will provision member portal logins for any row containing an email."]}),e.jsx(o,{type:"file",accept:".csv,text/csv",onChange:He,disabled:qe,className:"rounded-xl border-dashed border-slate-300 px-4 py-6 text-sm text-slate-600"}),ve&&e.jsx("p",{className:"text-sm text-rose-600",children:ve}),k&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-sm text-slate-600",children:["Processed ",k.processed," rows · created ",k.created," members."]}),k.credentials.length>0&&e.jsx(j,{cols:[{key:"member",header:"Member"},{key:"email",header:"Email"},{key:"temp_password",header:"Temp password"}],rows:k.credentials})]})]})}),e.jsxs(m,{title:"Integrations",subtitle:"Connect your stack",children:[re&&e.jsx("div",{className:"text-sm text-red-600 mb-3",children:re}),e.jsx(j,{cols:[{key:"provider",header:"Provider"},{key:"status",header:"Status",render:s=>s==="connected"?e.jsx(O,{tone:"good",children:"Connected"}):e.jsx(O,{children:s})},{key:"last_synced_at",header:"Last synced"}],rows:ke.map(s=>({...s,last_synced_at:s.last_synced_at??"Never"})),loading:v}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(u,{onClick:Qe,children:"Run Mindbody mock import"})})]}),ee&&e.jsx(m,{title:"Communication policy",subtitle:"Quiet hours & send caps",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("label",{className:"text-sm",children:["Quiet hours start",e.jsx(o,{name:"quiet_hours_start",type:"time",value:oe,className:"mt-1",onChange:s=>z(s.target.value)})]}),e.jsxs("label",{className:"text-sm",children:["Quiet hours end",e.jsx(o,{name:"quiet_hours_end",type:"time",value:le,className:"mt-1",onChange:s=>L(s.target.value)})]}),e.jsxs("label",{className:"text-sm",children:["Daily send cap",e.jsx(o,{name:"daily_cap",type:"number",min:0,value:ie,className:"mt-1",onChange:s=>A(Number(s.target.value))})]}),e.jsxs("label",{className:"text-sm",children:["Weekly send cap",e.jsx(o,{name:"weekly_cap",type:"number",min:0,value:de,className:"mt-1",onChange:s=>q(Number(s.target.value))})]}),e.jsxs("label",{className:"text-sm",children:["Timezone strategy",e.jsxs(Ce,{name:"timezone",value:ce,className:"mt-1",onChange:s=>J(s.target.value),children:[e.jsx("option",{value:"member_preference",children:"Member timezone"}),e.jsx("option",{value:"organization",children:"Organization timezone"})]})]}),e.jsxs("div",{className:"text-sm flex items-center justify-between border rounded-lg px-4 py-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Respect STOP keywords"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Required for SMS compliance (STOP, UNSUBSCRIBE, CANCEL)"})]}),e.jsx(Ge,{checked:ne,onChange:I})]}),e.jsx("div",{className:"md:col-span-2 flex justify-end",children:e.jsx(u,{type:"button",onClick:We,children:"Save policy"})}),B&&e.jsx("div",{className:"md:col-span-2 text-sm text-red-600",children:B}),Te&&!B&&e.jsx("div",{className:"md:col-span-2 text-sm text-emerald-600",children:"Policy updated."})]})}),N&&e.jsxs(m,{title:"Multi-factor authentication",subtitle:"Encourage authenticator apps for staff",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Preferred method"}),e.jsx("div",{className:"text-sm text-slate-500",children:"Authenticator apps provide stronger security than SMS. SMS remains available for convenience."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{tone:N.preference==="totp"?"primary":"neutral",onClick:()=>_e("totp"),children:"Authenticator app"}),e.jsx(u,{tone:N.preference==="sms"?"primary":"neutral",onClick:()=>_e("sms"),children:"SMS backup"})]})]}),e.jsxs("div",{className:"mt-4 text-xs text-slate-500",children:["Registered methods: ",N.methods.length===0?"none":N.methods.map(s=>s.type).join(", ")]})]}),e.jsx(m,{title:"Locations",subtitle:"Hours, deposits, cancellation",children:e.jsx("div",{className:"space-y-4",children:Pe.map(s=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsx("div",{className:"text-xs text-slate-500",children:"Cancellation window (minutes)"})]}),e.jsx(o,{type:"number",className:"w-28 px-2 py-1 text-sm",value:s.cancellation_window_minutes,onChange:t=>D(r=>r.map(a=>a.id===s.id?{...a,cancellation_window_minutes:Number(t.target.value)}:a))})]}),e.jsxs("label",{className:"text-xs text-slate-500",children:["Hours JSON",e.jsx("textarea",{className:"mt-1 w-full border rounded-lg px-2 py-1 text-xs",rows:3,value:s.hoursText??"",onChange:t=>D(r=>r.map(a=>a.id===s.id?{...a,hoursText:t.target.value}:a))})]}),e.jsxs("label",{className:"text-xs text-slate-500",children:["Deposit policy JSON",e.jsx("textarea",{className:"mt-1 w-full border rounded-lg px-2 py-1 text-xs",rows:2,value:s.depositText??"",onChange:t=>D(r=>r.map(a=>a.id===s.id?{...a,depositText:t.target.value}:a))})]}),e.jsx("div",{className:"text-right",children:e.jsx(u,{type:"button",onClick:()=>Ke(s),children:"Save"})})]},s.id))})}),e.jsxs(m,{title:"Class types",subtitle:"Programs & capacities",children:[e.jsxs("form",{className:"grid md:grid-cols-3 gap-3",onSubmit:async s=>{s.preventDefault();try{const t={name:f.name,description:f.description||void 0,default_capacity:f.default_capacity?Number(f.default_capacity):void 0},r=await i("/admin/class-types",{method:"POST",body:JSON.stringify(t)});me(a=>[...a,r.data]),E({name:"",description:"",default_capacity:""})}catch(t){p(t instanceof Error?t.message:"Failed to add class type")}},children:[e.jsx(o,{className:"border rounded-lg px-3 py-2",placeholder:"Name",value:f.name,onChange:s=>E(t=>({...t,name:s.target.value})),required:!0}),e.jsx(o,{className:"border rounded-lg px-3 py-2",placeholder:"Description",value:f.description,onChange:s=>E(t=>({...t,description:s.target.value}))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{className:"flex-1 border rounded-lg px-3 py-2",placeholder:"Capacity",value:f.default_capacity,onChange:s=>E(t=>({...t,default_capacity:s.target.value}))}),e.jsx(u,{type:"submit",children:"Add"})]})]}),e.jsx(j,{cols:[{key:"name",header:"Name"},{key:"description",header:"Description"},{key:"default_capacity",header:"Cap"}],rows:De,loading:v})]}),e.jsx(m,{title:"Staff & instructors",subtitle:"Roles, bios, certifications",children:e.jsx(j,{cols:[{key:"name",header:"Name"},{key:"title",header:"Title"},{key:"location",header:"Home location"},{key:"instructor",header:"Instructor"}],rows:Ee.map(s=>{var t,r;return{id:s.id,name:((t=s.user)==null?void 0:t.name)??"Unknown",title:s.title??"—",location:((r=s.primary_location)==null?void 0:r.name)??"All",instructor:s.is_instructor?e.jsx(O,{tone:"good",children:"Yes"}):e.jsx(O,{children:"No"})}}),loading:v})}),e.jsx(m,{title:"Observability",subtitle:"Events & release notes",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-700 mb-2",children:"Recent events"}),F&&e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm text-slate-800 mb-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"API p95"}),e.jsxs("div",{className:"font-semibold",children:[F.api_p95_ms??"–"," ms"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"UI p95"}),e.jsxs("div",{className:"font-semibold",children:[F.web_p95_ms??"–"," ms"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Uptime"}),e.jsxs("div",{className:"font-semibold",children:[F.uptime_percent??"–","%"]})]})]}),e.jsx(j,{cols:[{key:"event_type",header:"Type"},{key:"severity",header:"Severity"},{key:"created_at",header:"When"}],rows:Me.map(s=>({...s,created_at:new Date(s.created_at).toLocaleString()})),loading:v})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-700 mb-2",children:"Release notes"}),e.jsxs("form",{className:"grid gap-3",onSubmit:async s=>{s.preventDefault();try{const t=await i("/observability/release-notes",{method:"POST",body:JSON.stringify(R)});ue(r=>[t.data,...r]),$({title:"",body:""})}catch(t){p(t instanceof Error?t.message:"Failed to publish note")}},children:[e.jsx(o,{className:"border rounded-lg px-3 py-2",placeholder:"Title",value:R.title,onChange:s=>$(t=>({...t,title:s.target.value})),required:!0}),e.jsx("textarea",{className:"border rounded-lg px-3 py-2",rows:3,placeholder:"Body",value:R.body,onChange:s=>$(t=>({...t,body:s.target.value})),required:!0}),e.jsx(u,{type:"submit",children:"Publish"})]}),e.jsx("ul",{className:"mt-3 space-y-2 text-sm text-slate-700",children:Oe.map(s=>e.jsxs("li",{className:"border rounded-lg px-3 py-2 bg-slate-50",children:[e.jsx("div",{className:"font-semibold",children:s.title}),e.jsx("div",{className:"text-xs text-slate-500",children:s.published_at?new Date(s.published_at).toLocaleDateString():"Draft"})]},s.id))})]})]})}),e.jsx(m,{title:"Compliance",subtitle:"Domain auth & SMS registrations",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("form",{className:"grid md:grid-cols-4 gap-3",onSubmit:async s=>{s.preventDefault();try{const t=await i("/compliance/domains",{method:"POST",body:JSON.stringify(_)});pe(r=>[...r,t.data]),S({domain:"",spf_record:"",dkim_selector:"",dkim_value:""})}catch(t){p(t instanceof Error?t.message:"Failed to add domain")}},children:[e.jsx(o,{className:"border rounded-lg px-3 py-2",placeholder:"Domain",value:_.domain,onChange:s=>S(t=>({...t,domain:s.target.value})),required:!0}),e.jsx(o,{className:"border rounded-lg px-3 py-2",placeholder:"SPF record",value:_.spf_record,onChange:s=>S(t=>({...t,spf_record:s.target.value}))}),e.jsx(o,{className:"border rounded-lg px-3 py-2",placeholder:"DKIM selector",value:_.dkim_selector,onChange:s=>S(t=>({...t,dkim_selector:s.target.value}))}),e.jsx(o,{className:"border rounded-lg px-3 py-2",placeholder:"DKIM value",value:_.dkim_value,onChange:s=>S(t=>({...t,dkim_value:s.target.value}))}),e.jsx("div",{className:"md:col-span-4 flex justify-end",children:e.jsx(u,{type:"submit",children:"Add domain"})})]}),e.jsx(j,{cols:[{key:"domain",header:"Domain"},{key:"status",header:"Status"},{key:"spf_record",header:"SPF"}],rows:ze,loading:v}),e.jsxs("form",{className:"grid md:grid-cols-3 gap-3",onSubmit:async s=>{s.preventDefault();try{const t=await i("/compliance/sms",{method:"POST",body:JSON.stringify(H)});xe(r=>[...r,t.data]),Q({brand_name:"",campaign_name:""})}catch(t){p(t instanceof Error?t.message:"Failed to add registration")}},children:[e.jsx(o,{className:"border rounded-lg px-3 py-2",placeholder:"Brand name",value:H.brand_name,onChange:s=>Q(t=>({...t,brand_name:s.target.value})),required:!0}),e.jsx(o,{className:"border rounded-lg px-3 py-2",placeholder:"Campaign name",value:H.campaign_name,onChange:s=>Q(t=>({...t,campaign_name:s.target.value})),required:!0}),e.jsx("div",{className:"flex justify-end items-center",children:e.jsx(u,{type:"submit",children:"Add campaign"})})]}),e.jsx(j,{cols:[{key:"brand_name",header:"Brand"},{key:"campaign_name",header:"Campaign"},{key:"status",header:"Status"}],rows:Le,loading:v})]})})]})}export{ls as default};
