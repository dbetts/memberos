import{u as j,h as N,r as n,j as e,a as m,i as v}from"./app-CyWvWFcS.js";import{C as w}from"./Card-BhsN8Z8e.js";import{B as x}from"./Button-CUcdcEPx.js";import{T as k}from"./TextInput-s720DIIk.js";/* empty css            */function B(){const{workoutId:r}=j(),h=N(),[o,l]=n.useState({title:"",instructions:"",coach_notes:"",athlete_notes:""}),[f,c]=n.useState(!0),[d,b]=n.useState(null),[u,i]=n.useState(null);n.useEffect(()=>{if(!r)return;const t=new AbortController;async function s(){try{c(!0);const a=await m(`/workouts/items/${r}`,{signal:t.signal});if(t.signal.aborted)return;l({title:a.data.title,instructions:a.data.instructions??"",coach_notes:a.data.coach_notes??"",athlete_notes:a.data.athlete_notes??""}),i(null)}catch(a){if(v(a)||t.signal.aborted)return;i(a instanceof Error?a.message:"Unable to load workout")}finally{t.signal.aborted||c(!1)}}return s(),()=>t.abort()},[r]);async function p(t){if(t.preventDefault(),!!r)try{await m(`/workouts/items/${r}`,{method:"PUT",body:JSON.stringify(o)}),b("Workout saved"),i(null)}catch(s){i(s instanceof Error?s.message:"Unable to save workout")}}const g=o.title||"Workout";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-slate-500",children:["Builder · ",r]}),e.jsxs("h1",{className:"text-2xl font-bold text-slate-900",children:["Edit workout · ",g]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(x,{type:"button",onClick:()=>h(-1),children:"Back to builder"}),e.jsx(x,{type:"submit",form:"workout-editor-form",className:"bg-emerald-600 text-white hover:bg-emerald-500",children:"Save workout"})]})]}),d&&e.jsx("p",{className:"text-sm text-emerald-600",children:d}),u&&e.jsx("p",{className:"text-sm text-rose-600",children:u}),e.jsx(w,{title:"Workout definition",subtitle:"Update load prescriptions, scoring, and notes",children:f?e.jsx("p",{className:"text-sm text-slate-500",children:"Loading…"}):e.jsxs("form",{id:"workout-editor-form",className:"grid gap-6 lg:grid-cols-2",onSubmit:p,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700",children:["Name",e.jsx(k,{className:"mt-1",value:o.title,onChange:t=>l(s=>({...s,title:t.target.value}))})]}),e.jsxs("label",{className:"block text-sm font-medium text-slate-700",children:["Description",e.jsx("textarea",{value:o.instructions,onChange:t=>l(s=>({...s,instructions:t.target.value})),rows:6,className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2"})]}),e.jsxs("label",{className:"block text-sm font-medium text-slate-700",children:["Coach notes",e.jsx("textarea",{value:o.coach_notes??"",onChange:t=>l(s=>({...s,coach_notes:t.target.value})),rows:5,className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700",children:["Athlete notes",e.jsx("textarea",{value:o.athlete_notes??"",onChange:t=>l(s=>({...s,athlete_notes:t.target.value})),rows:8,className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2"})]}),e.jsx("div",{className:"rounded-2xl border border-slate-100 bg-slate-50/70 p-4 text-sm text-slate-500",children:"Publishing and analytics will surface here once a real workout service is connected."})]})]})})]})}export{B as default};
