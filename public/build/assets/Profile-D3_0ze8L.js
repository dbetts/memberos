import{r,a as j,i as y,j as a}from"./app-CyWvWFcS.js";import{C}from"./Card-BhsN8Z8e.js";import{B as w}from"./Button-CUcdcEPx.js";import{T as l}from"./TextInput-s720DIIk.js";/* empty css            */function L(){const[t,i]=r.useState({name:"",email:"",phone:"",address:{line1:"",line2:"",city:"",state:"",postal:"",country:""}}),[d,u]=r.useState(""),[x,p]=r.useState(""),[N,v]=r.useState(!0),[h,g]=r.useState(null),[f,m]=r.useState(null);r.useEffect(()=>{const e=new AbortController;return j("/auth/me",{signal:e.signal}).then(s=>{e.signal.aborted||i(s.data)}).catch(s=>{y(s)||e.signal.aborted||m("Unable to load profile.")}).finally(()=>{e.signal.aborted||v(!1)}),()=>{e.abort()}},[]);async function b(e){e.preventDefault(),g(null),m(null);try{const s={...t,address:t.address};d&&(s.password=d,s.password_confirmation=x);const o=await j("/auth/me",{method:"PUT",body:JSON.stringify(s)});i(o.data),u(""),p(""),g("Profile updated.")}catch(s){m(s instanceof Error?s.message:"Unable to update profile.")}}function c(e,s){i(o=>({...o,[e]:s}))}function n(e,s){i(o=>({...o,address:{...o.address,[e]:s}}))}return a.jsx("div",{className:"grid gap-6",children:a.jsx(C,{title:"Profile",subtitle:"Update your contact info and login",children:N?a.jsx("p",{className:"text-sm text-slate-500",children:"Loadingâ€¦"}):a.jsxs("form",{className:"grid gap-4 md:grid-cols-2",onSubmit:b,children:[a.jsxs("label",{className:"text-sm",children:["Full name",a.jsx(l,{className:"mt-1",value:t.name,onChange:e=>c("name",e.target.value),required:!0})]}),a.jsxs("label",{className:"text-sm",children:["Email",a.jsx(l,{type:"email",className:"mt-1",value:t.email,onChange:e=>c("email",e.target.value),required:!0})]}),a.jsxs("label",{className:"text-sm",children:["Phone",a.jsx(l,{className:"mt-1",value:t.phone,onChange:e=>c("phone",e.target.value)})]}),a.jsxs("label",{className:"text-sm",children:["Address line 1",a.jsx(l,{className:"mt-1",value:t.address.line1,onChange:e=>n("line1",e.target.value)})]}),a.jsxs("label",{className:"text-sm",children:["Address line 2",a.jsx(l,{className:"mt-1",value:t.address.line2,onChange:e=>n("line2",e.target.value)})]}),a.jsxs("label",{className:"text-sm",children:["City",a.jsx(l,{className:"mt-1",value:t.address.city,onChange:e=>n("city",e.target.value)})]}),a.jsxs("label",{className:"text-sm",children:["State",a.jsx(l,{className:"mt-1",value:t.address.state,onChange:e=>n("state",e.target.value)})]}),a.jsxs("label",{className:"text-sm",children:["Postal code",a.jsx(l,{className:"mt-1",value:t.address.postal,onChange:e=>n("postal",e.target.value)})]}),a.jsxs("label",{className:"text-sm",children:["Country",a.jsx(l,{className:"mt-1",value:t.address.country,onChange:e=>n("country",e.target.value)})]}),a.jsxs("label",{className:"text-sm",children:["New password",a.jsx(l,{type:"password",className:"mt-1",value:d,onChange:e=>u(e.target.value),placeholder:"Leave blank to keep current",minLength:8})]}),a.jsxs("label",{className:"text-sm",children:["Confirm password",a.jsx(l,{type:"password",className:"mt-1",value:x,onChange:e=>p(e.target.value),placeholder:"Repeat new password",minLength:8})]}),a.jsxs("div",{className:"md:col-span-2 flex flex-wrap items-center gap-3",children:[a.jsx(w,{type:"submit",children:"Save profile"}),h&&a.jsx("p",{className:"text-sm text-emerald-600",children:h}),f&&a.jsx("p",{className:"text-sm text-rose-600",children:f})]})]})})})}export{L as default};
