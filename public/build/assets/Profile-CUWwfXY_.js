import{r as l,a as f,i as N,j as a}from"./app-BPwyOtwv.js";import{C as w}from"./Card-CgvE_g0M.js";import{B as v}from"./Button-CvcUjvH4.js";/* empty css            */function A(){const[t,o]=l.useState({name:"",email:"",phone:"",address:{line1:"",line2:"",city:"",state:"",postal:"",country:""}}),[d,m]=l.useState(""),[c,p]=l.useState(""),[g,j]=l.useState(!0),[x,b]=l.useState(null),[h,i]=l.useState(null);l.useEffect(()=>{const e=new AbortController;return f("/auth/me",{signal:e.signal}).then(s=>{e.signal.aborted||o(s.data)}).catch(s=>{N(s)||e.signal.aborted||i("Unable to load profile.")}).finally(()=>{e.signal.aborted||j(!1)}),()=>{e.abort()}},[]);async function y(e){e.preventDefault(),b(null),i(null);try{const s={...t,address:t.address};d&&(s.password=d,s.password_confirmation=c);const n=await f("/auth/me",{method:"PUT",body:JSON.stringify(s)});o(n.data),m(""),p(""),b("Profile updated.")}catch(s){i(s instanceof Error?s.message:"Unable to update profile.")}}function u(e,s){o(n=>({...n,[e]:s}))}function r(e,s){o(n=>({...n,address:{...n.address,[e]:s}}))}return a.jsx("div",{className:"grid gap-6",children:a.jsx(w,{title:"Profile",subtitle:"Update your contact info and login",children:g?a.jsx("p",{className:"text-sm text-slate-500",children:"Loadingâ€¦"}):a.jsxs("form",{className:"grid gap-4 md:grid-cols-2",onSubmit:y,children:[a.jsxs("label",{className:"text-sm",children:["Full name",a.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:t.name,onChange:e=>u("name",e.target.value),required:!0})]}),a.jsxs("label",{className:"text-sm",children:["Email",a.jsx("input",{type:"email",className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:t.email,onChange:e=>u("email",e.target.value),required:!0})]}),a.jsxs("label",{className:"text-sm",children:["Phone",a.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:t.phone,onChange:e=>u("phone",e.target.value)})]}),a.jsxs("label",{className:"text-sm",children:["Address line 1",a.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:t.address.line1,onChange:e=>r("line1",e.target.value)})]}),a.jsxs("label",{className:"text-sm",children:["Address line 2",a.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:t.address.line2,onChange:e=>r("line2",e.target.value)})]}),a.jsxs("label",{className:"text-sm",children:["City",a.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:t.address.city,onChange:e=>r("city",e.target.value)})]}),a.jsxs("label",{className:"text-sm",children:["State",a.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:t.address.state,onChange:e=>r("state",e.target.value)})]}),a.jsxs("label",{className:"text-sm",children:["Postal code",a.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:t.address.postal,onChange:e=>r("postal",e.target.value)})]}),a.jsxs("label",{className:"text-sm",children:["Country",a.jsx("input",{className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:t.address.country,onChange:e=>r("country",e.target.value)})]}),a.jsxs("label",{className:"text-sm",children:["New password",a.jsx("input",{type:"password",className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:d,onChange:e=>m(e.target.value),placeholder:"Leave blank to keep current",minLength:8})]}),a.jsxs("label",{className:"text-sm",children:["Confirm password",a.jsx("input",{type:"password",className:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2",value:c,onChange:e=>p(e.target.value),placeholder:"Repeat new password",minLength:8})]}),a.jsxs("div",{className:"md:col-span-2 flex flex-wrap items-center gap-3",children:[a.jsx(v,{type:"submit",children:"Save profile"}),x&&a.jsx("p",{className:"text-sm text-emerald-600",children:x}),h&&a.jsx("p",{className:"text-sm text-rose-600",children:h})]})]})})})}export{A as default};
