import{r as s,j as t,a as m}from"./app-Bzd2Cgmj.js";import{C as h}from"./Card-cqcK0fx-.js";import{T as y}from"./Table-Ds_uRqhm.js";import{B as r}from"./Badge-CgfdLi4n.js";import{B as f}from"./Button-CWMM_Qw9.js";/* empty css            */function _(){const[p,u]=s.useState([]),[n,x]=s.useState([]),[o,i]=s.useState(!0),[l,c]=s.useState(null);return s.useEffect(()=>{let e=!0;async function d(){try{i(!0);const[a,g]=await Promise.all([m("/playbooks"),m("/templates")]);if(!e)return;u(a.data??[]),x(g.data??[])}catch(a){if(!e)return;c(a instanceof Error?a.message:"Failed to load playbooks")}finally{e&&i(!1)}}return d(),()=>{e=!1}},[]),t.jsxs("div",{className:"grid gap-6",children:[t.jsxs(h,{title:"Automation Playbooks",subtitle:"Always‑on nudges & offers",right:t.jsx(f,{onClick:()=>c("Builder coming soon"),children:"New playbook"}),children:[l&&t.jsx("div",{className:"text-sm text-red-600 mb-3",children:l}),t.jsx(y,{cols:[{key:"name",header:"Name"},{key:"trigger_type",header:"Trigger"},{key:"channel_strategy",header:"Channel",render:e=>!e||typeof e!="object"?"—":e.primary??"—"},{key:"status",header:"Status",render:e=>e==="active"?t.jsx(r,{tone:"good",children:"Active"}):e==="paused"?t.jsx(r,{tone:"warn",children:"Paused"}):t.jsx(r,{children:"Draft"})}],rows:p.map(e=>({...e,channel_strategy:e.channel_strategy??{}})),loading:o})]}),t.jsx(h,{title:"Templates",subtitle:"SMS & Email",children:t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.map(e=>t.jsxs("div",{className:"card p-4",children:[t.jsxs("div",{className:"text-sm text-slate-500",children:[e.channel.toUpperCase(),": ",e.name]}),t.jsx("p",{className:"mt-2 text-slate-700 text-sm",children:e.channel==="email"&&e.content_html?e.content_html.replace(/<[^>]+>/g,""):e.content_text??"No preview available"})]},e.id)),n.length===0&&!o&&t.jsx("div",{className:"text-sm text-slate-500",children:"No templates yet. Create one in communications settings."})]})})]})}export{_ as default};
