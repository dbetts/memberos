import{r as a,j as t,a as u,i as x}from"./app-D8iT2tzN.js";import{C as m}from"./Card-Dbv6updy.js";import{T as y}from"./Table-BCfVrJIm.js";import{B as n}from"./Badge-Bil8OKbm.js";import{B as f}from"./Button-CbkwZXlE.js";/* empty css            */function C(){const[g,h]=a.useState([]),[o,p]=a.useState([]),[i,l]=a.useState(!0),[c,r]=a.useState(null);return a.useEffect(()=>{const e=new AbortController;async function d(){try{l(!0);const s=await u("/playbooks/overview",{signal:e.signal});if(e.signal.aborted)return;h(s.data.playbooks??[]),p(s.data.templates??[]),r(null)}catch(s){if(x(s)||e.signal.aborted)return;r(s instanceof Error?s.message:"Failed to load playbooks")}finally{e.signal.aborted||l(!1)}}return d(),()=>e.abort()},[]),t.jsxs("div",{className:"grid gap-6",children:[t.jsxs(m,{title:"Automation Playbooks",subtitle:"Always‑on nudges & offers",right:t.jsx(f,{onClick:()=>r("Builder coming soon"),children:"New playbook"}),children:[c&&t.jsx("div",{className:"text-sm text-red-600 mb-3",children:c}),t.jsx(y,{cols:[{key:"name",header:"Name"},{key:"trigger_type",header:"Trigger"},{key:"channel_strategy",header:"Channel",render:e=>!e||typeof e!="object"?"—":e.primary??"—"},{key:"status",header:"Status",render:e=>e==="active"?t.jsx(n,{tone:"good",children:"Active"}):e==="paused"?t.jsx(n,{tone:"warn",children:"Paused"}):t.jsx(n,{children:"Draft"})}],rows:g.map(e=>({...e,channel_strategy:e.channel_strategy??{}})),loading:i})]}),t.jsx(m,{title:"Templates",subtitle:"SMS & Email",children:t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.map(e=>t.jsxs("div",{className:"card p-4",children:[t.jsxs("div",{className:"text-sm text-slate-500",children:[e.channel.toUpperCase(),": ",e.name]}),t.jsx("p",{className:"mt-2 text-slate-700 text-sm",children:e.channel==="email"&&e.content_html?e.content_html.replace(/<[^>]+>/g,""):e.content_text??"No preview available"})]},e.id)),o.length===0&&!i&&t.jsx("div",{className:"text-sm text-slate-500",children:"No templates yet. Create one in communications settings."})]})})]})}export{C as default};
